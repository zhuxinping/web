<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <style media="screen">
        .wrap {width:300px; height:300px; background:#CCC; overflow:hidden; margin:50px auto 0;
            position: relative;}
        .content {width:800px; height:800px; background:-webkit-linear-gradient(left top, red, green);
            position: relative;color:#fff;z-index: 2}
        .dropdown{
            position: absolute;
            left: 0;
            top: 0;
            text-align: center;
            z-index: 1;
            width: 100%;
            line-height: 30px;
        }

    </style>
    <!--<script src="iscroll.js" charset="utf-8"></script>-->
    <script src="iscroll-probe.js" charset="utf-8"></script>
    <script>
        window.onload=function (){
            let iscroll=new IScroll('.wrap', {probeType:2});
            let dropdown=document.querySelector('.dropdown');
            let scroolYBeforeRelease=0;
            iscroll.on('scrollStart',function () {
                scroolYBeforeRelease=0;
            });
            iscroll.on('scroll',function () {
                //console.log(iscroll.x,iscroll.y);
                if(iscroll.y>100){
                    dropdown.innerHTML='松手刷新';
                }else{
                    dropdown.innerHTML='下拉刷新';
                }
                scroolYBeforeRelease=iscroll.y;
            });
            iscroll.on('scrollEnd',function () {
               //console.log(scroolYBeforeRelease)
                if(scroolYBeforeRelease>100){
                    //alert('刷新');
                    //$.ajax(....);
                }else{
                    alert('不刷新');
                }
            });
        };
    </script>
</head>
<body>
<div class="wrap">
    <div class="content">
        打开
    </div>
    <div class="dropdown">下拉刷新</div>
</div>
</body>
</html>
